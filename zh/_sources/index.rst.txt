ModbusLink æ–‡æ¡£
===============

.. image:: https://img.shields.io/pypi/v/modbuslink.svg
   :target: https://pypi.org/project/modbuslink/
   :alt: PyPIç‰ˆæœ¬

.. image:: https://img.shields.io/pypi/pyversions/modbuslink.svg
   :target: https://pypi.org/project/modbuslink/
   :alt: Pythonç‰ˆæœ¬

.. image:: https://img.shields.io/github/license/Miraitowa-la/ModbusLink
   :target: https://github.com/Miraitowa-la/ModbusLink/blob/main/LICENSE.txt
   :alt: è®¸å¯è¯

æ¬¢è¿ä½¿ç”¨ ModbusLink æ–‡æ¡£ï¼

ModbusLink æ˜¯ä¸€ä¸ª**ç°ä»£åŒ–ã€é«˜æ€§èƒ½çš„Python Modbusåº“**ï¼Œä¸“ä¸ºå·¥ä¸šè‡ªåŠ¨åŒ–ã€ç‰©è”ç½‘åº”ç”¨å’ŒSCADAç³»ç»Ÿè®¾è®¡ã€‚é‡‡ç”¨ç°ä»£åŒ–Pythonå¼€å‘å®è·µï¼Œåœ¨ä¿æŒä¼ä¸šçº§å¯é æ€§çš„åŒæ—¶æä¾›æ— ä¸ä¼¦æ¯”çš„æ˜“ç”¨æ€§ã€‚

.. toctree::
   :maxdepth: 2
   :caption: å¿«é€Ÿå…¥é—¨
   :hidden:

   installation
   quickstart
   architecture

.. toctree::
   :maxdepth: 2
   :caption: ç”¨æˆ·æŒ‡å—
   :hidden:

   user_guide
   advanced_guide
   performance
   production

.. toctree::
   :maxdepth: 2
   :caption: ç¤ºä¾‹å’Œå®è·µ
   :hidden:

   examples
   best_practices
   troubleshooting

.. toctree::
   :maxdepth: 2
   :caption: APIæ–‡æ¡£
   :hidden:

   api_reference

.. toctree::
   :maxdepth: 1
   :caption: å…¶ä»–
   :hidden:

   changelog
   contributing

æ–‡æ¡£å¯¼èˆª
========

æ–°æ‰‹å…¥é—¨
--------

.. grid:: 2
   :gutter: 3

   .. grid-item-card:: âš¡ 30ç§’å¿«é€Ÿä½“éªŒ
      :link: quickstart
      :link-type: doc
      :class-card: quickstart-card

      å‡ åˆ†é’Ÿå†…å¼€å§‹ä½¿ç”¨ModbusLinkã€‚å­¦ä¹ åŸºç¡€çŸ¥è¯†å¹¶å®ç°æ‚¨çš„ç¬¬ä¸€æ¬¡Modbusé€šä¿¡ã€‚

   .. grid-item-card:: ğŸ› ï¸ å®‰è£…è¯´æ˜
      :link: installation
      :link-type: doc
      :class-card: install-card

      è¯¦ç»†çš„å®‰è£…æŒ‡å—ï¼ŒåŒ…æ‹¬ç³»ç»Ÿè¦æ±‚ã€ä¾èµ–é¡¹å’Œç¯å¢ƒé…ç½®ã€‚

æ ¸å¿ƒåŠŸèƒ½
--------

.. grid:: 3
   :gutter: 3

   .. grid-item-card:: ğŸ“– ç”¨æˆ·æŒ‡å—
      :link: user_guide
      :link-type: doc
      :class-card: guide-card

      å…¨é¢çš„ä½¿ç”¨æŒ‡å—ï¼Œæ¶µç›–ä»åŸºæœ¬æ“ä½œåˆ°é«˜çº§é…ç½®çš„æ‰€æœ‰åŠŸèƒ½ã€‚

   .. grid-item-card:: ğŸ—ï¸ æ¶æ„è®¾è®¡
      :link: architecture
      :link-type: doc
      :class-card: arch-card

      æ·±å…¥äº†è§£ModbusLinkçš„åˆ†å±‚æ¶æ„å’Œè®¾è®¡åŸç†ã€‚

   .. grid-item-card:: ğŸ“š APIå‚è€ƒ
      :link: api_reference
      :link-type: doc
      :class-card: api-card

      å®Œæ•´çš„APIæ–‡æ¡£ï¼ŒåŒ…å«è¯¦ç»†çš„ç±»å’Œæ–¹æ³•æè¿°ã€‚

å®æˆ˜åº”ç”¨
--------

.. grid:: 3
   :gutter: 3

   .. grid-item-card:: ğŸ’¡ ä»£ç ç¤ºä¾‹
      :link: examples
      :link-type: doc
      :class-card: example-card

      ä¸°å¯Œçš„å®é™…ç¤ºä¾‹ï¼Œæ¶µç›–å„ç§å·¥ä¸šåº”ç”¨åœºæ™¯ã€‚

   .. grid-item-card:: âš¡ æ€§èƒ½ä¼˜åŒ–
      :link: performance
      :link-type: doc
      :class-card: perf-card

      æ€§èƒ½è°ƒä¼˜æŠ€å·§å’Œå¹¶å‘å¤„ç†æœ€ä½³å®è·µã€‚

   .. grid-item-card:: ğŸ”§ æ•…éšœæ’é™¤
      :link: troubleshooting
      :link-type: doc
      :class-card: trouble-card

      å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆå’Œè°ƒè¯•æŠ€å·§ã€‚

æ ¸å¿ƒç‰¹æ€§
========

.. list-table:: ModbusLink æ ¸å¿ƒç‰¹æ€§
   :widths: 20 40 40
   :header-rows: 1

   * - ç‰¹æ€§
     - æè¿°
     - ä¼˜åŠ¿
   * - ğŸ—ï¸ **åˆ†å±‚æ¶æ„**
     - å…³æ³¨ç‚¹æ¸…æ™°åˆ†ç¦»
     - æ˜“äºç»´æŠ¤å’Œæ‰©å±•
   * - ğŸ”Œ **é€šç”¨ä¼ è¾“**
     - æ”¯æŒTCPã€RTUã€ASCII
     - å…¼å®¹æ‰€æœ‰Modbusè®¾å¤‡
   * - âš¡ **å¼‚æ­¥æ€§èƒ½**
     - åŸç”Ÿasyncioæ”¯æŒ
     - å¤„ç†1000+å¹¶å‘è¿æ¥
   * - ğŸ› ï¸ **å¼€å‘ä½“éªŒ**
     - ç›´è§‚APIå’Œå®Œæ•´ç±»å‹æç¤º
     - æ›´å¿«å¼€å‘ï¼Œæ›´å°‘bug
   * - ğŸ“Š **ä¸°å¯Œæ•°æ®ç±»å‹**
     - float32ã€int32ã€å­—ç¬¦ä¸²ç­‰
     - å¤„ç†å¤æ‚å·¥ä¸šæ•°æ®
   * - ğŸ” **é«˜çº§è°ƒè¯•**
     - åè®®çº§ç›‘æ§
     - å¿«é€Ÿæ•…éšœæ’é™¤
   * - ğŸ–¥ï¸ **å®Œæ•´æœåŠ¡å™¨**
     - å…¨åŠŸèƒ½æœåŠ¡å™¨å®ç°
     - æ„å»ºè‡ªå®šä¹‰Modbusè®¾å¤‡
   * - ğŸ¯ **ç”Ÿäº§å°±ç»ª**
     - å…¨é¢é”™è¯¯å¤„ç†
     - æ”¾å¿ƒéƒ¨ç½²

æ”¯æŒçš„ModbusåŠŸèƒ½ç 
==================

.. list-table:: 
   :widths: 15 25 60
   :header-rows: 1

   * - åŠŸèƒ½ç 
     - åŠŸèƒ½åç§°
     - æè¿°
   * - **0x01**
     - è¯»å–çº¿åœˆ
     - è¯»å–ä¸€ä¸ªæˆ–å¤šä¸ªçº¿åœˆçš„çŠ¶æ€ï¼ˆå¸ƒå°”å€¼ï¼‰
   * - **0x02**
     - è¯»å–ç¦»æ•£è¾“å…¥
     - è¯»å–ä¸€ä¸ªæˆ–å¤šä¸ªç¦»æ•£è¾“å…¥çš„çŠ¶æ€ï¼ˆåªè¯»å¸ƒå°”å€¼ï¼‰
   * - **0x03**
     - è¯»å–ä¿æŒå¯„å­˜å™¨
     - è¯»å–ä¸€ä¸ªæˆ–å¤šä¸ªä¿æŒå¯„å­˜å™¨çš„å€¼ï¼ˆ16ä½æ•´æ•°ï¼‰
   * - **0x04**
     - è¯»å–è¾“å…¥å¯„å­˜å™¨
     - è¯»å–ä¸€ä¸ªæˆ–å¤šä¸ªè¾“å…¥å¯„å­˜å™¨çš„å€¼ï¼ˆåªè¯»16ä½æ•´æ•°ï¼‰
   * - **0x05**
     - å†™å•ä¸ªçº¿åœˆ
     - å‘æŒ‡å®šåœ°å€å†™å…¥å•ä¸ªçº¿åœˆå€¼
   * - **0x06**
     - å†™å•ä¸ªå¯„å­˜å™¨
     - å‘æŒ‡å®šåœ°å€å†™å…¥å•ä¸ªå¯„å­˜å™¨å€¼
   * - **0x0F**
     - å†™å¤šä¸ªçº¿åœˆ
     - å‘è¿ç»­åœ°å€å†™å…¥å¤šä¸ªçº¿åœˆå€¼
   * - **0x10**
     - å†™å¤šä¸ªå¯„å­˜å™¨
     - å‘è¿ç»­åœ°å€å†™å…¥å¤šä¸ªå¯„å­˜å™¨å€¼

30ç§’å¿«é€Ÿä½“éªŒ
============

å®‰è£…ModbusLink
--------------

.. code-block:: bash

   # ä» PyPI å®‰è£…
   pip install modbuslink

ç®€å•ç¤ºä¾‹
--------

**TCPå®¢æˆ·ç«¯ï¼ˆä»¥å¤ªç½‘è®¾å¤‡ï¼‰**

.. code-block:: python

   from modbuslink import ModbusClient, TcpTransport

   # è¿æ¥åˆ°Modbus TCPè®¾å¤‡
   transport = TcpTransport(host='192.168.1.100', port=502)
   client = ModbusClient(transport)

   with client:
       # è¯»å–æ¸©åº¦ä¼ æ„Ÿå™¨
       temp = client.read_float32(slave_id=1, start_address=100)
       print(f"æ¸©åº¦: {temp:.1f}Â°C")
       
       # æ§åˆ¶æ°´æ³µå¼€å…³
       client.write_single_coil(slave_id=1, address=0, value=True)
       print("æ°´æ³µå·²å¯åŠ¨ï¼")

**ä¸²å£å®¢æˆ·ç«¯ï¼ˆRTUè®¾å¤‡ï¼‰**

.. code-block:: python

   from modbuslink import ModbusClient, RtuTransport

   # è¿æ¥åˆ°ä¸²å£è®¾å¤‡
   transport = RtuTransport(port='COM3', baudrate=9600)
   client = ModbusClient(transport)

   with client:
       # è¯»å–æµé‡è®¡æ•°æ®
       flow = client.read_float32(slave_id=5, start_address=0)
       print(f"æµé‡: {flow:.2f} L/min")

**é«˜æ€§èƒ½å¼‚æ­¥æ“ä½œ**

.. code-block:: python

   import asyncio
   from modbuslink import AsyncModbusClient, AsyncTcpTransport

   async def read_multiple_plcs():
       """åŒæ—¶è¯»å–å¤šä¸ªPLCæ•°æ®"""
       plc1 = AsyncModbusClient(AsyncTcpTransport('192.168.1.10', 502))
       plc2 = AsyncModbusClient(AsyncTcpTransport('192.168.1.11', 502))
       
       async with plc1, plc2:
           # å¹¶å‘è¯»å–
           results = await asyncio.gather(
               plc1.read_holding_registers(1, 0, 10),
               plc2.read_holding_registers(1, 0, 10)
           )
           print(f"PLC1: {results[0]}, PLC2: {results[1]}")

   asyncio.run(read_multiple_plcs())

ç«‹å³å¼€å§‹
--------

ğŸš€ å‡†å¤‡å¥½äº†å—ï¼Ÿå‰å¾€ :doc:`installation` å®‰è£…ModbusLinkï¼Œç„¶åæŸ¥çœ‹ :doc:`quickstart` è·å–è¯¦ç»†çš„å…¥é—¨æ•™ç¨‹ï¼

ç¤¾åŒºå’Œæ”¯æŒ
==========

.. grid:: 2
   :gutter: 3

   .. grid-item-card:: ğŸ“– GitHubé¡¹ç›®
      :link: https://github.com/Miraitowa-la/ModbusLink
      :link-type: url

      æºä»£ç ã€é—®é¢˜æŠ¥å‘Šå’ŒåŠŸèƒ½è¯·æ±‚

   .. grid-item-card:: ğŸ“¦ PyPIåŒ…
      :link: https://pypi.org/project/modbuslink/
      :link-type: url

      å®˜æ–¹å‘å¸ƒåŒ…å’Œç‰ˆæœ¬å†å²

ç‰ˆæœ¬ä¿¡æ¯
========

.. include:: ../CHANGELOG.md
   :parser: myst_parser.sphinx_

ç´¢å¼•å’Œè¡¨æ ¼
==========

* :ref:`genindex`
* :ref:`modindex`
* :ref:`search`